window.jest_html_reporters_callback__({"numFailedTestSuites":3,"numFailedTests":19,"numPassedTestSuites":2,"numPassedTests":65,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":5,"numTotalTests":84,"startTime":1753072018839,"success":false,"testResults":[{"numFailingTests":5,"numPassingTests":17,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753072019410,"loadTestEnvironmentEnd":1753072018871,"loadTestEnvironmentStart":1753072018847,"runtime":538,"setupAfterEnvEnd":1753072018975,"setupAfterEnvStart":1753072018945,"setupFilesEnd":1753072018872,"setupFilesStart":1753072018872,"slow":false,"start":1753072018872},"testFilePath":"/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js","failureMessage":"  ● Enhanced Visa Eligibility API Tests › Enhanced Scoring Algorithms › should calculate graduated salary scores correctly\n\n    expect(received).toBeLessThanOrEqual(expected)\n\n    Expected: <= 90\n    Received:    100\n\n      388 |           if (salaryRequirement) {\n      389 |             expect(salaryRequirement.achieved).toBeGreaterThanOrEqual(testCase.expectedRange[0]);\n    > 390 |             expect(salaryRequirement.achieved).toBeLessThanOrEqual(testCase.expectedRange[1]);\n          |                                                ^\n      391 |           }\n      392 |         }\n      393 |       }\n\n      at Object.toBeLessThanOrEqual (Tests/visa.enhanced.test.js:390:48)\n\n  ● Enhanced Visa Eligibility API Tests › Enhanced Scoring Algorithms › should calculate age-based scores correctly\n\n    expect(received).toBeLessThanOrEqual(expected)\n\n    Expected: <= 80\n    Received:    100\n\n      427 |           if (ageRequirement) {\n      428 |             expect(ageRequirement.achieved).toBeGreaterThanOrEqual(testCase.expectedRange[0]);\n    > 429 |             expect(ageRequirement.achieved).toBeLessThanOrEqual(testCase.expectedRange[1]);\n          |                                             ^\n      430 |           }\n      431 |         }\n      432 |       }\n\n      at Object.toBeLessThanOrEqual (Tests/visa.enhanced.test.js:429:45)\n\n  ● Enhanced Visa Eligibility API Tests › Enhanced Scoring Algorithms › should handle visit duration scoring for tourist visas\n\n    expect(received).toBeLessThan(expected)\n\n    Expected: < 60\n    Received:   86\n\n      469 |             expect(b1b2Visa.score).toBeGreaterThan(40);\n      470 |           } else {\n    > 471 |             expect(b1b2Visa.score).toBeLessThan(60);\n          |                                    ^\n      472 |           }\n      473 |         }\n      474 |       }\n\n      at Object.toBeLessThan (Tests/visa.enhanced.test.js:471:36)\n\n  ● Enhanced Visa Eligibility API Tests › Visa-Specific Logic › should require high education for H-1B specialty worker visa\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 70\n    Received:   0\n\n      626 |       // H-1B requires bachelor's degree minimum\n      627 |       expect(lowH1B.score).toBe(0); // Should fail required field\n    > 628 |       expect(highH1B.score).toBeGreaterThan(70); // Should score well\n          |                             ^\n      629 |     });\n      630 |   });\n      631 |\n\n      at Object.toBeGreaterThan (Tests/visa.enhanced.test.js:628:29)\n\n  ● Enhanced Visa Eligibility API Tests › Nationality-Based Scoring › should give advantages to USMCA countries for relevant visas\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 70\n    Received:   0\n\n      666 |         if (usmcaCountries.includes(nationality)) {\n      667 |           // USMCA countries should have high TN scores\n    > 668 |           expect(tnVisa.score).toBeGreaterThan(70);\n          |                                ^\n      669 |         } else {\n      670 |           // Non-USMCA countries should have 0 TN score (required field fails)\n      671 |           expect(tnVisa.score).toBe(0);\n\n      at Object.toBeGreaterThan (Tests/visa.enhanced.test.js:668:32)\n","testResults":[{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":36,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should accept complete valid data structure","status":"passed","title":"should accept complete valid data structure"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":3,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should reject invalid nationality codes","status":"passed","title":"should reject invalid nationality codes"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":9,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should reject invalid age ranges","status":"passed","title":"should reject invalid age ranges"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":2,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should reject invalid degree levels","status":"passed","title":"should reject invalid degree levels"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":3,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should reject invalid jobType values","status":"passed","title":"should reject invalid jobType values"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":7,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should accept valid jobType values","status":"passed","title":"should accept valid jobType values"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Input Validation"],"duration":2,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Input Validation should handle percentage values correctly (0-100)","status":"passed","title":"should handle percentage values correctly (0-100)"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","NAFTA Profession Recognition"],"duration":14,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests NAFTA Profession Recognition should recognize standard English NAFTA professions","status":"passed","title":"should recognize standard English NAFTA professions"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","NAFTA Profession Recognition"],"duration":13,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests NAFTA Profession Recognition should recognize Spanish profession names","status":"passed","title":"should recognize Spanish profession names"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","NAFTA Profession Recognition"],"duration":14,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests NAFTA Profession Recognition should handle profession variations and abbreviations","status":"passed","title":"should handle profession variations and abbreviations"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","NAFTA Profession Recognition"],"duration":9,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests NAFTA Profession Recognition should not recognize non-NAFTA professions","status":"passed","title":"should not recognize non-NAFTA professions"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Enhanced Scoring Algorithms"],"duration":5,"failureMessages":["Error: expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 90\nReceived:    100\n    at Object.toBeLessThanOrEqual (/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js:390:48)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Enhanced Visa Eligibility API Tests Enhanced Scoring Algorithms should calculate graduated salary scores correctly","status":"failed","title":"should calculate graduated salary scores correctly"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Enhanced Scoring Algorithms"],"duration":2,"failureMessages":["Error: expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 80\nReceived:    100\n    at Object.toBeLessThanOrEqual (/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js:429:45)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Enhanced Visa Eligibility API Tests Enhanced Scoring Algorithms should calculate age-based scores correctly","status":"failed","title":"should calculate age-based scores correctly"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Enhanced Scoring Algorithms"],"duration":5,"failureMessages":["Error: expect(received).toBeLessThan(expected)\n\nExpected: < 60\nReceived:   86\n    at Object.toBeLessThan (/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js:471:36)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Enhanced Visa Eligibility API Tests Enhanced Scoring Algorithms should handle visit duration scoring for tourist visas","status":"failed","title":"should handle visit duration scoring for tourist visas"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Visa-Specific Logic"],"duration":2,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Visa-Specific Logic should prioritize TN visa for Mexican NAFTA professionals","status":"passed","title":"should prioritize TN visa for Mexican NAFTA professionals"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Visa-Specific Logic"],"duration":1,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Visa-Specific Logic should favor H-2A visa for agricultural workers","status":"passed","title":"should favor H-2A visa for agricultural workers"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Visa-Specific Logic"],"duration":4,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Visa-Specific Logic should require strong ties for B-1/B-2 tourist visas","status":"passed","title":"should require strong ties for B-1/B-2 tourist visas"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Visa-Specific Logic"],"duration":3,"failureMessages":["Error: expect(received).toBeGreaterThan(expected)\n\nExpected: > 70\nReceived:   0\n    at Object.toBeGreaterThan (/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js:628:29)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Enhanced Visa Eligibility API Tests Visa-Specific Logic should require high education for H-1B specialty worker visa","status":"failed","title":"should require high education for H-1B specialty worker visa"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Nationality-Based Scoring"],"duration":4,"failureMessages":["Error: expect(received).toBeGreaterThan(expected)\n\nExpected: > 70\nReceived:   0\n    at Object.toBeGreaterThan (/home/ids/Documentos/Express apps/hello-api/Tests/visa.enhanced.test.js:668:32)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Enhanced Visa Eligibility API Tests Nationality-Based Scoring should give advantages to USMCA countries for relevant visas","status":"failed","title":"should give advantages to USMCA countries for relevant visas"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Error Handling and Edge Cases"],"duration":2,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Error Handling and Edge Cases should handle missing optional fields gracefully","status":"passed","title":"should handle missing optional fields gracefully"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Error Handling and Edge Cases"],"duration":1,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Error Handling and Edge Cases should handle null and undefined values in optional fields","status":"passed","title":"should handle null and undefined values in optional fields"},{"ancestorTitles":["Enhanced Visa Eligibility API Tests","Error Handling and Edge Cases"],"duration":3,"failureMessages":[],"fullName":"Enhanced Visa Eligibility API Tests Error Handling and Edge Cases should provide meaningful error messages for validation failures","status":"passed","title":"should provide meaningful error messages for validation failures"}]},{"numFailingTests":13,"numPassingTests":4,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753072019484,"loadTestEnvironmentEnd":1753072019417,"loadTestEnvironmentStart":1753072019414,"runtime":66,"setupAfterEnvEnd":1753072019435,"setupAfterEnvStart":1753072019434,"setupFilesEnd":1753072019418,"setupFilesStart":1753072019418,"slow":false,"start":1753072019418},"testFilePath":"/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js","failureMessage":"  ● Validation Middleware Tests › normalizeDegreeLevel Function › should normalize Spanish degree names correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"associate\"\n    Received: null\n\n      24 |\n      25 |       Object.entries(spanishMappings).forEach(([spanish, english]) => {\n    > 26 |         expect(normalizeDegreeLevel(spanish)).toBe(english);\n         |                                               ^\n      27 |       });\n      28 |     });\n      29 |\n\n      at toBe (Tests/validation.test.js:26:47)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:25:39)\n\n  ● Validation Middleware Tests › normalizeDegreeLevel Function › should handle case insensitive input\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n      35 |       testCases.forEach(testCase => {\n      36 |         const result = normalizeDegreeLevel(testCase);\n    > 37 |         expect(result).not.toBeNull();\n         |                            ^\n      38 |         expect(typeof result).toBe('string');\n      39 |       });\n      40 |     });\n\n      at toBeNull (Tests/validation.test.js:37:28)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:35:17)\n\n  ● Validation Middleware Tests › normalizeDegreeLevel Function › should handle whitespace variations\n\n    expect(received).not.toBeNull()\n\n    Received: null\n\n      47 |       testCases.forEach(testCase => {\n      48 |         const result = normalizeDegreeLevel(testCase);\n    > 49 |         expect(result).not.toBeNull();\n         |                            ^\n      50 |       });\n      51 |     });\n      52 |\n\n      at toBeNull (Tests/validation.test.js:49:28)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:47:17)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should reject missing personalInfo\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at Object.validateVisaRequest (Tests/validation.test.js:134:7)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should validate nationality format\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:164:9)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:151:17)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should validate age ranges\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:201:9)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:188:17)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should validate degree levels\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:237:9)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:224:20)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should validate jobType enum values\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:305:9)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:289:23)\n\n  ● Validation Middleware Tests › Joi Validation Schema › should validate percentage ranges (0-100)\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:337:11)\n          at Array.forEach (<anonymous>)\n      at forEach (Tests/validation.test.js:323:19)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:322:24)\n\n  ● Validation Middleware Tests › Degree Normalization Integration › should reject invalid degree levels even after normalization attempt\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at Object.validateVisaRequest (Tests/validation.test.js:420:7)\n\n  ● Validation Middleware Tests › Degree Normalization Integration › should handle mixed case Spanish degree inputs\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at validateVisaRequest (Tests/validation.test.js:444:9)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (Tests/validation.test.js:431:17)\n\n  ● Validation Middleware Tests › Error Message Quality › should provide detailed error information\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at Object.validateVisaRequest (Tests/validation.test.js:481:7)\n\n  ● Validation Middleware Tests › Error Message Quality › should include field information in error details\n\n    TypeError: req.t is not a function\n\n      77 |     return res.status(400).json({\n      78 |       success: false,\n    > 79 |       message: req.t('validation.error'),\n         |                    ^\n      80 |       errors: error.details.map(detail => ({ message: detail.message, field: detail.context.key }))\n      81 |     });\n      82 |   }\n\n      at t (src/middleware/validator.js:79:20)\n      at Object.validateVisaRequest (Tests/validation.test.js:507:7)\n","testResults":[{"ancestorTitles":["Validation Middleware Tests","normalizeDegreeLevel Function"],"duration":2,"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"associate\"\nReceived: null\n    at toBe (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:26:47)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:25:39)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests normalizeDegreeLevel Function should normalize Spanish degree names correctly","status":"failed","title":"should normalize Spanish degree names correctly"},{"ancestorTitles":["Validation Middleware Tests","normalizeDegreeLevel Function"],"duration":0,"failureMessages":["Error: expect(received).not.toBeNull()\n\nReceived: null\n    at toBeNull (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:37:28)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:35:17)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests normalizeDegreeLevel Function should handle case insensitive input","status":"failed","title":"should handle case insensitive input"},{"ancestorTitles":["Validation Middleware Tests","normalizeDegreeLevel Function"],"duration":0,"failureMessages":["Error: expect(received).not.toBeNull()\n\nReceived: null\n    at toBeNull (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:49:28)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:47:17)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests normalizeDegreeLevel Function should handle whitespace variations","status":"failed","title":"should handle whitespace variations"},{"ancestorTitles":["Validation Middleware Tests","normalizeDegreeLevel Function"],"duration":0,"failureMessages":[],"fullName":"Validation Middleware Tests normalizeDegreeLevel Function should return null for invalid degree levels","status":"passed","title":"should return null for invalid degree levels"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":0,"failureMessages":[],"fullName":"Validation Middleware Tests Joi Validation Schema should accept valid complete request","status":"passed","title":"should accept valid complete request"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at Object.validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:134:7)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should reject missing personalInfo","status":"failed","title":"should reject missing personalInfo"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:164:9)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:151:17)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should validate nationality format","status":"failed","title":"should validate nationality format"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:201:9)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:188:17)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should validate age ranges","status":"failed","title":"should validate age ranges"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:237:9)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:224:20)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should validate degree levels","status":"failed","title":"should validate degree levels"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:305:9)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:289:23)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should validate jobType enum values","status":"failed","title":"should validate jobType enum values"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:337:11)\n    at Array.forEach (<anonymous>)\n    at forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:323:19)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:322:24)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Joi Validation Schema should validate percentage ranges (0-100)","status":"failed","title":"should validate percentage ranges (0-100)"},{"ancestorTitles":["Validation Middleware Tests","Joi Validation Schema"],"duration":0,"failureMessages":[],"fullName":"Validation Middleware Tests Joi Validation Schema should handle optional fields correctly","status":"passed","title":"should handle optional fields correctly"},{"ancestorTitles":["Validation Middleware Tests","Degree Normalization Integration"],"duration":1,"failureMessages":[],"fullName":"Validation Middleware Tests Degree Normalization Integration should normalize Spanish degree levels before validation","status":"passed","title":"should normalize Spanish degree levels before validation"},{"ancestorTitles":["Validation Middleware Tests","Degree Normalization Integration"],"duration":0,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at Object.validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:420:7)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Degree Normalization Integration should reject invalid degree levels even after normalization attempt","status":"failed","title":"should reject invalid degree levels even after normalization attempt"},{"ancestorTitles":["Validation Middleware Tests","Degree Normalization Integration"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:444:9)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:431:17)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Degree Normalization Integration should handle mixed case Spanish degree inputs","status":"failed","title":"should handle mixed case Spanish degree inputs"},{"ancestorTitles":["Validation Middleware Tests","Error Message Quality"],"duration":0,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at Object.validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:481:7)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Error Message Quality should provide detailed error information","status":"failed","title":"should provide detailed error information"},{"ancestorTitles":["Validation Middleware Tests","Error Message Quality"],"duration":1,"failureMessages":["TypeError: req.t is not a function\n    at t (/home/ids/Documentos/Express apps/hello-api/src/middleware/validator.js:79:20)\n    at Object.validateVisaRequest (/home/ids/Documentos/Express apps/hello-api/Tests/validation.test.js:507:7)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Validation Middleware Tests Error Message Quality should include field information in error details","status":"failed","title":"should include field information in error details"}]},{"numFailingTests":1,"numPassingTests":14,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753072019526,"loadTestEnvironmentEnd":1753072019489,"loadTestEnvironmentStart":1753072019487,"runtime":37,"setupAfterEnvEnd":1753072019506,"setupAfterEnvStart":1753072019505,"setupFilesEnd":1753072019489,"setupFilesStart":1753072019489,"slow":false,"start":1753072019489},"testFilePath":"/home/ids/Documentos/Express apps/hello-api/Tests/scoringService.test.js","failureMessage":"  ● Scoring Service Tests › getNextSteps Function › should provide improvement suggestions for low-scoring criteria\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"inglés\"\n    Received string:    \"🎯 áreas de mejora prioritarias: necesitas mejorar: considera maestría, certificaciones, o más experiencia encuentra empleadores dispuestos a patrocinar h-1b prepara evidencia de especialización en tu campo considera aplicar a múltiples empleadores para aumentar chances agenda una cita en el consulado estadounidense más cercano prepara todos los documentos requeridos con traducciones oficiales practica para la entrevista consular\"\n\n      274 |       const stepsText = steps.join(' ').toLowerCase();\n      275 |       expect(stepsText).toContain('mejora'); // Should have improvement suggestions\n    > 276 |       expect(stepsText).toContain('inglés'); // Should mention English improvement\n          |                         ^\n      277 |     });\n      278 |\n      279 |     it('should limit steps to reasonable number', () => {\n\n      at Object.toContain (Tests/scoringService.test.js:276:25)\n","testResults":[{"ancestorTitles":["Scoring Service Tests","calculateVisaEligibility Integration"],"duration":2,"failureMessages":[],"fullName":"Scoring Service Tests calculateVisaEligibility Integration should return properly structured results","status":"passed","title":"should return properly structured results"},{"ancestorTitles":["Scoring Service Tests","calculateVisaEligibility Integration"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests calculateVisaEligibility Integration should handle empty user data gracefully","status":"passed","title":"should handle empty user data gracefully"},{"ancestorTitles":["Scoring Service Tests","calculateVisaEligibility Integration"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests calculateVisaEligibility Integration should calculate different scores for different profiles","status":"passed","title":"should calculate different scores for different profiles"},{"ancestorTitles":["Scoring Service Tests","calculateReadinessScore Function"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests calculateReadinessScore Function should handle required field validation correctly","status":"passed","title":"should handle required field validation correctly"},{"ancestorTitles":["Scoring Service Tests","calculateReadinessScore Function"],"duration":1,"failureMessages":[],"fullName":"Scoring Service Tests calculateReadinessScore Function should calculate graduated scores for salary ranges","status":"passed","title":"should calculate graduated scores for salary ranges"},{"ancestorTitles":["Scoring Service Tests","calculateReadinessScore Function"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests calculateReadinessScore Function should handle NAFTA profession matching","status":"passed","title":"should handle NAFTA profession matching"},{"ancestorTitles":["Scoring Service Tests","calculateReadinessScore Function"],"duration":1,"failureMessages":[],"fullName":"Scoring Service Tests calculateReadinessScore Function should handle Spanish profession names","status":"passed","title":"should handle Spanish profession names"},{"ancestorTitles":["Scoring Service Tests","getScoreCategory Function"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests getScoreCategory Function should categorize scores correctly","status":"passed","title":"should categorize scores correctly"},{"ancestorTitles":["Scoring Service Tests","getNextSteps Function"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests getNextSteps Function should provide specific steps for TN visa","status":"passed","title":"should provide specific steps for TN visa"},{"ancestorTitles":["Scoring Service Tests","getNextSteps Function"],"duration":0,"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"inglés\"\nReceived string:    \"🎯 áreas de mejora prioritarias: necesitas mejorar: considera maestría, certificaciones, o más experiencia encuentra empleadores dispuestos a patrocinar h-1b prepara evidencia de especialización en tu campo considera aplicar a múltiples empleadores para aumentar chances agenda una cita en el consulado estadounidense más cercano prepara todos los documentos requeridos con traducciones oficiales practica para la entrevista consular\"\n    at Object.toContain (/home/ids/Documentos/Express apps/hello-api/Tests/scoringService.test.js:276:25)\n    at Promise.finally.completed (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1499:10)\n    at _callCircusTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1009:40)\n    at _runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:829:11)\n    at run (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/jestAdapterInit.js:1920:21)\n    at jestAdapter (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-circus/build/runner.js:101:19)\n    at runTestInternal (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:272:16)\n    at runTest (/home/ids/Documentos/Express apps/hello-api/node_modules/jest-runner/build/index.js:340:7)"],"fullName":"Scoring Service Tests getNextSteps Function should provide improvement suggestions for low-scoring criteria","status":"failed","title":"should provide improvement suggestions for low-scoring criteria"},{"ancestorTitles":["Scoring Service Tests","getNextSteps Function"],"duration":1,"failureMessages":[],"fullName":"Scoring Service Tests getNextSteps Function should limit steps to reasonable number","status":"passed","title":"should limit steps to reasonable number"},{"ancestorTitles":["Scoring Service Tests","getNextSteps Function"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests getNextSteps Function should provide visa-specific advice for different visa types","status":"passed","title":"should provide visa-specific advice for different visa types"},{"ancestorTitles":["Scoring Service Tests","Edge Cases and Error Handling"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests Edge Cases and Error Handling should handle missing data gracefully","status":"passed","title":"should handle missing data gracefully"},{"ancestorTitles":["Scoring Service Tests","Edge Cases and Error Handling"],"duration":0,"failureMessages":[],"fullName":"Scoring Service Tests Edge Cases and Error Handling should handle extreme values gracefully","status":"passed","title":"should handle extreme values gracefully"},{"ancestorTitles":["Scoring Service Tests","Edge Cases and Error Handling"],"duration":1,"failureMessages":[],"fullName":"Scoring Service Tests Edge Cases and Error Handling should handle invalid data types gracefully","status":"passed","title":"should handle invalid data types gracefully"}]},{"numFailingTests":0,"numPassingTests":9,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753072019633,"loadTestEnvironmentEnd":1753072019533,"loadTestEnvironmentStart":1753072019530,"runtime":100,"setupAfterEnvEnd":1753072019550,"setupAfterEnvStart":1753072019549,"setupFilesEnd":1753072019533,"setupFilesStart":1753072019533,"slow":false,"start":1753072019533},"testFilePath":"/home/ids/Documentos/Express apps/hello-api/Tests/visa.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":7,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should respond with eligibility results for valid input","status":"passed","title":"should respond with eligibility results for valid input"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":7,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should respond with 400 for empty body","status":"passed","title":"should respond with 400 for empty body"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":2,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should respond with 400 if personalInfo is missing","status":"passed","title":"should respond with 400 if personalInfo is missing"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":1,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should respond with 400 if nationality is invalid length","status":"passed","title":"should respond with 400 if nationality is invalid length"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":1,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should respond with 400 if degreeLevel is invalid","status":"passed","title":"should respond with 400 if degreeLevel is invalid"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":2,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should return high score for perfect matching data","status":"passed","title":"should return high score for perfect matching data"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":2,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should return low score for minimal matching data","status":"passed","title":"should return low score for minimal matching data"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":2,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility should return medium score for partially matching data","status":"passed","title":"should return medium score for partially matching data"},{"ancestorTitles":["POST /api/v1/visa/eligibility"],"duration":1,"failureMessages":[],"fullName":"POST /api/v1/visa/eligibility GET /api/v1/health should return status ok","status":"passed","title":"GET /api/v1/health should return status ok"}]},{"numFailingTests":0,"numPassingTests":21,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1753072019716,"loadTestEnvironmentEnd":1753072019636,"loadTestEnvironmentStart":1753072019634,"runtime":80,"setupAfterEnvEnd":1753072019653,"setupAfterEnvStart":1753072019652,"setupFilesEnd":1753072019636,"setupFilesStart":1753072019636,"slow":false,"start":1753072019636},"testFilePath":"/home/ids/Documentos/Express apps/hello-api/Tests/naftaProfessions.test.js","failureMessage":null,"testResults":[{"ancestorTitles":["NAFTA Professions Tests","Profession List Validation"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession List Validation should contain expected core NAFTA professions","status":"passed","title":"should contain expected core NAFTA professions"},{"ancestorTitles":["NAFTA Professions Tests","Profession List Validation"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession List Validation should be an array with reasonable length","status":"passed","title":"should be an array with reasonable length"},{"ancestorTitles":["NAFTA Professions Tests","Profession List Validation"],"duration":20,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession List Validation should contain only lowercase strings","status":"passed","title":"should contain only lowercase strings"},{"ancestorTitles":["NAFTA Professions Tests","Profession List Validation"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession List Validation should not contain duplicates","status":"passed","title":"should not contain duplicates"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include medical professions","status":"passed","title":"should include medical professions"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include engineering specialties","status":"passed","title":"should include engineering specialties"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include scientific professions","status":"passed","title":"should include scientific professions"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include business and management roles","status":"passed","title":"should include business and management roles"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include technology professions","status":"passed","title":"should include technology professions"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include creative and design professions","status":"passed","title":"should include creative and design professions"},{"ancestorTitles":["NAFTA Professions Tests","Profession Coverage"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Profession Coverage should include legal professions","status":"passed","title":"should include legal professions"},{"ancestorTitles":["NAFTA Professions Tests","Common Job Title Variations"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Common Job Title Variations should include common abbreviations","status":"passed","title":"should include common abbreviations"},{"ancestorTitles":["NAFTA Professions Tests","Common Job Title Variations"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Common Job Title Variations should include manager variations","status":"passed","title":"should include manager variations"},{"ancestorTitles":["NAFTA Professions Tests","Common Job Title Variations"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Common Job Title Variations should include developer variations","status":"passed","title":"should include developer variations"},{"ancestorTitles":["NAFTA Professions Tests","Real-world Job Title Matching"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Real-world Job Title Matching should match common job titles that Latin Americans use","status":"passed","title":"should match common job titles that Latin Americans use"},{"ancestorTitles":["NAFTA Professions Tests","Real-world Job Title Matching"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Real-world Job Title Matching should handle job titles with company-specific additions","status":"passed","title":"should handle job titles with company-specific additions"},{"ancestorTitles":["NAFTA Professions Tests","Performance Tests"],"duration":21,"failureMessages":[],"fullName":"NAFTA Professions Tests Performance Tests should handle large-scale profession lookups efficiently","status":"passed","title":"should handle large-scale profession lookups efficiently"},{"ancestorTitles":["NAFTA Professions Tests","Performance Tests"],"duration":1,"failureMessages":[],"fullName":"NAFTA Professions Tests Performance Tests should have reasonable memory usage","status":"passed","title":"should have reasonable memory usage"},{"ancestorTitles":["NAFTA Professions Tests","Quality Assurance"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Quality Assurance should not contain obviously non-professional job titles","status":"passed","title":"should not contain obviously non-professional job titles"},{"ancestorTitles":["NAFTA Professions Tests","Quality Assurance"],"duration":0,"failureMessages":[],"fullName":"NAFTA Professions Tests Quality Assurance should contain valid professional categories","status":"passed","title":"should contain valid professional categories"},{"ancestorTitles":["NAFTA Professions Tests","Quality Assurance"],"duration":12,"failureMessages":[],"fullName":"NAFTA Professions Tests Quality Assurance should be properly formatted for searching","status":"passed","title":"should be properly formatted for searching"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["src/**/*.js","!src/config/**","!**/node_modules/**"],"coverageDirectory":"/home/ids/Documentos/Express apps/hello-api/coverage","coverageProvider":"babel","coverageReporters":["text","lcov","html"],"coverageThreshold":{"global":{"branches":70,"functions":70,"lines":70,"statements":70}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":false,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":15,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/home/ids/Documentos/Express apps/hello-api/node_modules/jest-html-reporters/index.js",{"publicPath":"./coverage","filename":"test-report.html","expand":true}]],"rootDir":"/home/ids/Documentos/Express apps/hello-api","runInBand":false,"runTestsByPath":false,"seed":1984351211,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPatterns":{"patterns":[],"type":"TestPathPatterns"},"testSequencer":"/home/ids/Documentos/Express apps/hello-api/node_modules/@jest/test-sequencer/build/index.js","testTimeout":10000,"updateSnapshot":"new","useStderr":false,"verbose":true,"waitForUnhandledRejections":false,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1753072019719,"_reporterOptions":{"publicPath":"./coverage","filename":"test-report.html","expand":true,"pageTitle":"","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})